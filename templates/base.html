{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Loja Online{% endblock %}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="icon" href="{% static 'img/favicon.png' %}" type="image/png">
  <!-- Ícones (se usar ícones na sidebar) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body class="has-sidebar"><!-- classe indica que esta página usa sidebar -->

<!-- Top Bar (rolável, não fixa) -->
<div class="top-bar">
  <div class="container d-flex justify-content-between">
    <div>
      <span>📍 456 Creative District Ahmad Yani, Medan, North Sumatera</span>
      <span>✉ <a href="mailto:hola@dominantsite.com">hola@dominantsite.com</a></span>
      <span>📞 <a href="tel:+80033744676">+800-3374-4676</a></span>
    </div>
    <div>
      <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
      <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
      <a href="#"><i class="fa-brands fa-youtube"></i></a>
    </div>
  </div>
</div>

<!-- Navbar FIXA -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" 
      href="{% if user.is_authenticated and user.is_staff %}{% url 'dashboard' %}{% else %}{% url 'loja:produtos' %}{% endif %}">
      <img src="{% static 'img/logo.png' %}" class="logo-navbar me-2" alt="Casa & Obra">
      <span class="text-warning">Casa & Obra</span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="menu">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        {% if user.is_authenticated %}
          {% if user.is_staff %}
            <li class="nav-item"><a class="nav-link" href="{% url 'dashboard' %}">Dashboard</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'produtos:index' %}">Produtos</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'clientes:index' %}">Clientes</a></li>
          {% else %}
            <!-- Dropdown Loja -->
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Loja
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'loja:produtos' %}">Todos os Produtos</a></li>
                <li><a class="dropdown-item" href="#">Novidades</a></li>
                <li><a class="dropdown-item" href="#">Promoções</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">Mais Vendidos</a></li>
              </ul>
            </li>

            <!-- Dropdown Categorias -->
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Categorias
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Roupas</a></li>
                <li><a class="dropdown-item" href="#">Acessórios</a></li>
                <li><a class="dropdown-item" href="#">Eletrônicos</a></li>
                <li><a class="dropdown-item" href="#">Casa & Decoração</a></li>
              </ul>
            </li>

            <!-- Links básicos -->
            <li class="nav-item"><a class="nav-link" href="{% url 'loja:carrinho' %}">Carrinho</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'loja:area_cliente' %}">Minha Conta</a></li>
          {% endif %}
        {% endif %}
      </ul>

      <div class="d-flex align-items-center">
        {% if user.is_authenticated %}
          <span class="text-white me-3">Olá, {{ user.first_name|default:user.username }}</span>
          <form action="{% url 'logout' %}" method="post">{% csrf_token %}
            <button type="submit" class="btn btn-link nav-link text-white p-0">Sair</button>
          </form>
        {% else %}
          <a class="nav-link text-white" href="{% url 'login' %}">Entrar</a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<!-- SIDEBAR FIXA (fora do grid) -->
<aside class="sidebar">
  <h2 class="sidebar-title">Categorias</h2>
  <ul class="sidebar-menu">
    <li><a href="#"><i class="fa-solid fa-hammer"></i> Ferramentas</a></li>
    <li><a href="#"><i class="fa-solid fa-paint-roller"></i> Pintura</a></li>
    <li><a href="#"><i class="fa-solid fa-ruler-combined"></i> Construção</a></li>
    <li><a href="#"><i class="fa-solid fa-lightbulb"></i> Elétrica</a></li>
    <li><a href="#"><i class="fa-solid fa-screwdriver-wrench"></i> Hidráulica</a></li>
    <li><a href="#"><i class="fa-solid fa-door-closed"></i> Marcenaria</a></li>
  </ul>
</aside>

<!-- CONTEÚDO: use esta wrapper -->
<main class="main-content">
  <div class="container">
    {% block content %}{% endblock %}
  </div>
</main>

<!-- Rodapé -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-4 d-flex align-items-center">
        <img src="{% static 'img/logo.png' %}" class="logo-footer me-2" alt="Casa & Obra">
        <h5>Casa & Obra</h5>
      </div>
      <div class="col-md-4">
        <h5>Links Rápidos</h5>
        <ul class="list-unstyled">
          <li><a href="{% url 'loja:produtos' %}">Produtos</a></li>
          <li><a href="{% url 'loja:carrinho' %}">Carrinho</a></li>
          <li><a href="">Contato</a></li>
          <li><a href="#">Política de Privacidade</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <h5>Contato</h5>
        <p>📍 456 Creative District Ahmad Yani</p>
        <p>✉ <a href="mailto:hola@dominantsite.com">hola@dominantsite.com</a></p>
        <p>📞 <a href="tel:+80033744676">+800-3374-4676</a></p>
      </div>
    </div>
    <div class="text-center mt-3">
      <small>© 2025 Casa & Obra — Todos os direitos reservados.</small>
    </div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
